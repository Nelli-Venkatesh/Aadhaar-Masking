/*
 Author  : Venkatesh Nelli
 Version : 2.0
 License : GNU General Public License v3.0
 Description: This Directive is used for masking aadhaar number and mobile number
 */

!function(){"use strict";var e=angular.module("input_masking",[]);e.directive("uidInputModel",function(){var d=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],p=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]];return{restrict:"A",Scope:!0,controller:["$scope","$element","$attrs","$parse",function(i,e,a,n){i.val_name="";var u=n(a.uidInputModel),r=a.maskLength,o=0,l=new Array;l.push(8),e.bind("keypress",function(e){if($("input[uid-input-model="+a.uidInputModel+"]").val().length<12){var n=e.which?e.which:e.keyCode,t=48<=n&&n<=57||-1!=l.indexOf(n);return t&&(i.val_name+=String.fromCharCode(n)),u.assign(i,i.val_name),t}}),e.bind("keyup",function(e){var n;if(o=0,12==$("input[uid-input-model="+a.uidInputModel+"]").val().length&&(function(e){if(333333333333==e||666666666666==e||999999999999==e)return!1;for(var n=0,t=function(e){for(var n=[e.length],t=0;t<e.length;t++)n[t]=e.substring(t,t+1);return n=function(e){for(var n=[e.length],t=0;t<e.length;t++)n[t]=e[e.length-(t+1)];return n}(n)}(e),l=0;l<t.length;l++)n=d[n][p[l%8][t[l]]];return 0==n}(i.$eval(a.uidInputModel))||($("input[uid-input-model="+a.uidInputModel+"]").val(""),u.assign(i,""),alert("Entered aadhaar number is invalid"))),navigator.userAgent.match(/Android/i)){var t=this.value;n=t,i.val_name+=n.substr(n.length-1)}var l=$("input[uid-input-model="+a.uidInputModel+"]").val();null==r||null==r||""==r?l=this.value.replace(/[^\d\X]/g,"").replace(/\d/g,"X"):l.length<=r&&(l=this.value.replace(/[^\d\X]/g,"").replace(/\d/g,"X")),$("input[uid-input-model="+a.uidInputModel+"]").val(l),l.length!=i.val_name.length&&(i.val_name=i.val_name.substring(0,l.length)),u.assign(i,i.val_name)}),e.keydown(function(e){o++;var n=e.keyCode||e.charCode;8!=n&&1<o&&e.preventDefault(),46==n&&(e.preventDefault(),e.stopPropagation()),37==n&&e.preventDefault(),39==n&&e.preventDefault()}),e.bind("drop",function(e){return!1}),e.bind("paste",function(e){return!1}),i.$watch(u,function(e,n){""!=e&&null!=e||($("input[uid-input-model="+a.uidInputModel+"]").val(""),i.val_name="")})}]}}),e.directive("mobileInputModel",function(){return{restrict:"A",Scope:!0,controller:["$scope","$element","$attrs","$parse",function(a,e,u,n){a.val_name="";var r=n(u.mobileInputModel),o=u.maskLength,d=0,l=new Array;l.push(8),e.bind("keypress",function(e){if($("input[mobile-input-model="+u.mobileInputModel+"]").val().length<12){var n=e.which?e.which:e.keyCode,t=48<=n&&n<=57||-1!=l.indexOf(n);return t&&(a.val_name+=String.fromCharCode(n)),r.assign(a,a.val_name),t}}),e.bind("keyup",function(e){if(d=0,10==$("input[mobile-input-model="+u.mobileInputModel+"]").val().length){var n=a.$eval(u.mobileInputModel);n.match("[6-9]{1}[0-9]{9}")||($("input[mobile-input-model="+u.mobileInputModel+"]").val(""),r.assign(a,""),alert("Entered mobile number is invalid"))}var t;if(navigator.userAgent.match(/Android/i)){var l=this.value;t=l,a.val_name+=t.substr(t.length-1)}var i=$("input[mobile-input-model="+u.mobileInputModel+"]").val();null==o||null==o||""==o?i=this.value.replace(/[^\d\X]/g,"").replace(/\d/g,"X"):i.length<=o&&(i=this.value.replace(/[^\d\X]/g,"").replace(/\d/g,"X")),$("input[mobile-input-model="+u.mobileInputModel+"]").val(i),i.length!=a.val_name.length&&(a.val_name=a.val_name.substring(0,i.length)),r.assign(a,a.val_name)}),e.keydown(function(e){d++;var n=e.keyCode||e.charCode;8!=n&&1<d&&e.preventDefault(),46==n&&(e.preventDefault(),e.stopPropagation()),37==n&&e.preventDefault(),39==n&&e.preventDefault()}),e.bind("drop",function(e){return!1}),e.bind("paste",function(e){return!1}),a.$watch(r,function(e,n){""!=e&&null!=e||($("input[mobile-input-model="+u.mobileInputModel+"]").val(""),a.val_name="")})}]}})}();
